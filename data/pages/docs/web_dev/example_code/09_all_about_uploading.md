# All About Uploading

This demonstration showcases more features of the Uploader service:

* It is possible to upload multiple files in a single HTTP transaction using multipart post.
* You may specify post variables dynamically from javascript
* The uploader should seamlessly drop in to replace existing HTML only uploading forms.
* Full progress is accessible to JavaScript   
* The response body from the server is passed back to javascript.

@{include examples/all_about_uploading.raw}

**NOTE:** Our servers impose upload limits of 2mb per file and 8mb per transaction.

This demonstration simply outputs the json response generated by
the server php into a &lt;pre&gt; section.  Here is the full
'upload.php' server bit:

~~~
$uploadErrors = array(
    UPLOAD_ERR_INI_SIZE => 'The uploaded file exceeds the upload_max_filesize directive in php.ini.',
    UPLOAD_ERR_FORM_SIZE => 'The uploaded file exceeds the MAX_FILE_SIZE directive that was specified in the HTML form.',
    UPLOAD_ERR_PARTIAL => 'The uploaded file was only partially uploaded.',
    UPLOAD_ERR_NO_FILE => 'No file was uploaded.',
    UPLOAD_ERR_NO_TMP_DIR => 'Missing a temporary folder.',
    UPLOAD_ERR_CANT_WRITE => 'Failed to write file to disk.',
    UPLOAD_ERR_EXTENSION => 'File upload stopped by extension.'
);

header("Content-type: text/plain");

echo "{\n";
echo "  'post_variables': {\n"; 
foreach ($_POST as $k => $v) {
    echo "    " . $k . ": '" . $v . "'\n";
}
echo "  },\n"; 
echo "  files: [\n";

for ($x = 0; $x < sizeof($_FILES); $x++) {
    echo "    {\n";
    $ec = $_FILES[$x]['error'];

    if ($ec !== UPLOAD_ERR_OK)
    {
        if (isset($uploadErrors[$ec])) {
            echo "      error: '" . $uploadErrors[$ec] . "',\n";
        } else {
            echo "      error: 'unknown error',\n";
        }
    }
	echo "      size: " . $_FILES[$x]['size'] . ",\n";
	echo "      name: '" . $_FILES[$x]['name'] . "',\n";
	echo "      md5: '" . md5(file_get_contents($_FILES[$x]['tmp_name'])) . "'\n";
    echo "    },\n";
}

echo "  ]\n";
echo "}\n";
~~~